# Chrome拡張機能「Markdown Viewer with Mermaid」機能拡張調査レポート（詳細版）

## 1. 現状分析

### 1.1 現在の機能
- ローカルMarkdownファイル（.md, .markdown）の表示
- Mermaid図（フローチャート、シーケンス図、ガントチャート等）の描画
- 基本的なMarkdown記法のサポート
- シンプルで読みやすいスタイリング

### 1.2 技術スタック
- **Manifest V3**対応
- **marked.js**: Markdown解析
- **mermaid.js**: 図表描画
- カスタムCSS: スタイリング

### 1.3 現在の制限事項
- ローカルファイルのみ対応（file://プロトコル）
- 基本的な表示機能のみ
- インタラクティブ機能なし
- 設定・カスタマイズ機能なし

## 2. 競合分析

### 2.1 主要競合拡張機能

#### Markdown Viewer（Chrome Web Store上位）
- **特徴**: シンプルなMarkdown表示
- **強み**: 軽量、高速
- **弱み**: 図表サポートなし、カスタマイズ性低

#### Markdown Reader
- **特徴**: テーマ切り替え、目次生成
- **強み**: 多様なテーマ、ナビゲーション機能
- **弱み**: Mermaid未対応

#### Markdown Preview Plus
- **特徴**: リアルタイムプレビュー、数式サポート
- **強み**: MathJax対応、プレビュー同期
- **弱み**: 重い、設定が複雑

### 2.2 市場ギャップ分析
1. **Mermaid対応拡張機能の少なさ**
2. **開発者向け機能の不足**
3. **チーム協業機能の欠如**
4. **アクセシビリティ対応の不備**

## 3. ユーザーニーズ調査

### 3.1 想定ユーザー層
- **開発者・エンジニア**: 技術文書、設計書の閲覧
- **プロジェクトマネージャー**: 仕様書、進捗管理文書
- **技術ライター**: ドキュメント作成・確認
- **学生・研究者**: 論文、レポート作成

### 3.2 ユーザーの課題
- 複数のMarkdownファイル間の移動が困難
- 図表の編集・更新が面倒
- チームでの文書共有時の一貫性確保
- 長文書での目次・検索機能の不足

## 4. 機能拡張提案（詳細説明付き）

### 4.1 即座に実装可能な機能（Phase 1）

#### 4.1.1 ナビゲーション機能

**目次自動生成機能**
- **概要**: Markdownファイル内の見出し（H1-H6）を自動的に抽出し、クリック可能な目次を生成
- **機能詳細**:
  - 見出しレベルに応じた階層表示
  - クリックで該当セクションへスムーススクロール
  - 現在位置のハイライト表示
  - 折りたたみ可能な階層構造
- **ユーザー価値**: 長文書での素早いナビゲーション、文書構造の把握
- **実装例**:
```
目次
├─ 1. はじめに
├─ 2. システム概要
│   ├─ 2.1 アーキテクチャ
│   └─ 2.2 技術スタック
└─ 3. 実装詳細
```

**進捗インジケーター**
- **概要**: 文書の読み進み状況を視覚的に表示
- **機能詳細**:
  - ページ上部に進捗バー表示
  - スクロール位置に応じた進捗率計算
  - 推定読了時間の表示
- **ユーザー価値**: 長文書での現在位置把握、読了予測

#### 4.1.2 テーマ・カスタマイズ機能

**ダークモード対応**
- **概要**: 目に優しい暗色テーマの提供
- **機能詳細**:
  - ワンクリックでライト/ダーク切り替え
  - システム設定に連動した自動切り替え
  - Mermaid図もダークテーマに対応
  - 設定の永続化
- **ユーザー価値**: 夜間作業時の目の疲労軽減、モダンなUI体験

**フォントサイズ調整**
- **概要**: ユーザーの視認性に合わせたフォントサイズ変更
- **機能詳細**:
  - 段階的サイズ調整（小・中・大・特大）
  - キーボードショートカット対応（Ctrl + +/-）
  - 見出しとテキストの比率維持
- **ユーザー価値**: アクセシビリティ向上、個人の好みに対応

#### 4.1.3 検索・フィルタ機能

**ページ内全文検索**
- **概要**: 文書内のテキストを高速検索
- **機能詳細**:
  - インクリメンタル検索（入力と同時に結果表示）
  - 検索結果のハイライト表示
  - 前後の検索結果への移動
  - 検索履歴の保存
- **ユーザー価値**: 長文書での情報検索効率化

**見出し検索**
- **概要**: 見出しのみを対象とした検索
- **機能詳細**:
  - 見出しレベルでのフィルタリング
  - 部分一致・完全一致の選択
  - 検索結果から直接ジャンプ
- **ユーザー価値**: 文書構造の把握、特定セクションへの高速アクセス

**正規表現サポート**
- **概要**: 高度な検索パターンに対応
- **機能詳細**:
  - 正規表現モードの切り替え
  - よく使用するパターンのプリセット
  - 検索結果のグループ化表示
- **ユーザー価値**: 開発者向けの高度な検索機能

#### 4.1.4 エクスポート機能

**PDF出力**
- **概要**: 表示中のMarkdownをPDFファイルとして保存
- **機能詳細**:
  - Mermaid図を含む完全なPDF生成
  - 印刷レイアウトの最適化
  - ページ番号、ヘッダー・フッター設定
  - 目次付きPDF生成
- **ユーザー価値**: 文書の配布、印刷、アーカイブ

**HTML出力**
- **概要**: スタンドアロンHTMLファイルとして出力
- **機能詳細**:
  - CSS・JavaScript埋め込み
  - 外部依存なしの完全なHTMLファイル
  - 圧縮オプション
- **ユーザー価値**: Webサイトでの公開、メール添付



### 4.2 中期実装機能（Phase 2）

#### 4.2.1 Markdown編集機能

**軽量Markdownエディタ**
- **概要**: ブラウザ上でMarkdownファイルを直接編集
- **機能詳細**:
  - シンプルなテキストエディタ
  - リアルタイムプレビュー
  - 基本的なMarkdown記法サポート
  - 保存先選択（元ファイル上書き・別名保存）
- **ユーザー価値**: 文書の迅速な修正、編集の効率化

#### 4.2.2 Mermaidリアルタイム編集機能

**Mermaid図表編集**
- **概要**: Mermaid図をリアルタイムで編集・プレビュー
- **機能詳細**:
  - インライン編集モード
  - リアルタイムプレビュー
  - エラー検証とハイライト
  - 編集結果の保存（元ファイル・別名保存）
- **ユーザー価値**: 図表の迅速な修正、視覚的な編集体験

#### 4.2.3 ファイル保存機能

**保存オプション**
- **概要**: 編集内容の保存先を選択可能
- **機能詳細**:
  - 元ファイルへの上書き保存
  - 別名での保存
  - 保存前の確認ダイアログ
  - 自動バックアップ機能
- **ユーザー価値**: データ損失の防止、柔軟な保存オプション

## 6. 成功指標（KPI）

### 6.1 技術指標
- **パフォーマンス**: 読み込み時間 < 1秒
- **安定性**: クラッシュ率 < 0.1%
- **互換性**: Chrome 90+対応

### 6.2 ビジネス指標
- **ダウンロード数**: 10,000+ (6ヶ月以内)
- **アクティブユーザー**: 5,000+ (月間)
- **評価**: 4.5+ (Chrome Web Store)
- **GitHub Stars**: 500+ (1年以内)

## 6. 実装優先度マトリックス

| 機能 | 実装難易度 | ユーザー価値 | 開発工数 | 優先度 |
|------|------------|--------------|----------|--------|
| 目次自動生成 | 低 | 高 | 1週間 | ★★★ |
| ダークモード | 低 | 高 | 3日 | ★★★ |
| 検索機能 | 中 | 高 | 1週間 | ★★★ |
| Markdown編集 | 中 | 高 | 2週間 | ★★☆ |
| Mermaidリアルタイム編集 | 高 | 高 | 3週間 | ★★☆ |
| PDF出力 | 中 | 中 | 2週間 | ★★☆ |
| 保存機能 | 中 | 中 | 1週間 | ★★☆ |

## 7. 結論と推奨事項

### 7.1 最優先実装機能
1. **目次自動生成**: 即座にユーザー価値を提供
2. **ダークモード**: 現代的なUI要求に対応
3. **検索機能**: 長文書での利便性向上
4. **Markdown編集**: 軽量な編集機能で利便性向上

### 7.2 成功のための重要要素
- **軽量性**: 高速で軽量な動作を維持
- **シンプルさ**: 複雑な機能は避け、使いやすさを重視
- **無料配布**: コストのかかる外部サービスは使用しない
- **ユーザーフィードバック**: 継続的な改善サイクル

---
